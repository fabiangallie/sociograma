<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Acceso Alumno</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="title-box azul">
      <h1 class="title-grande">Acceso Alumno</h1>
    </div>

    <form class="form" id="form-acceso">
      <label for="grupo">Selecciona tu grupo:</label>
      <select id="grupo" required onchange="cargarAlumnos()">
        <option value="">-- Elegir grupo --</option>
      </select>

      <label for="alumno">Selecciona tu nombre:</label>
      <select id="alumno" required>
        <option value="">-- Elegir nombre --</option>
      </select>

      <button type="submit" class="btn">Entrar</button>
    </form>
  </div>

  <script>
    // Cargar grupos guardados al iniciar
    const selectGrupo = document.getElementById("grupo");
    for (let i = 0; i < localStorage.length; i++) {
      const clave = localStorage.key(i);
      if (clave.includes(" - ")) {
        const option = document.createElement("option");
        option.value = clave;
        option.textContent = clave;
        selectGrupo.appendChild(option);
      }
    }

    function cargarAlumnos() {
      const clave = selectGrupo.value;
      const selectAlumno = document.getElementById("alumno");
      selectAlumno.innerHTML = `<option value="">-- Elegir nombre --</option>`;

      if (!clave) return;

      const grupo = JSON.parse(localStorage.getItem(clave));
      grupo.alumnos.forEach(nombre => {
        const option = document.createElement("option");
        option.value = nombre;
        option.textContent = nombre;
        selectAlumno.appendChild(option);
      });
    }

    document.getElementById("form-acceso").addEventListener("submit", function(e) {
      e.preventDefault();
      const grupo = selectGrupo.value;
      const alumno = document.getElementById("alumno").value;
      if (!grupo || !alumno) return alert("Debes seleccionar grupo y nombre.");

      // Guardamos en sessionStorage para usar en el test
      sessionStorage.setItem("grupoSeleccionado", grupo);
      sessionStorage.setItem("alumnoSeleccionado", alumno);

      // Redirigir al test
      window.location.href = "test.html"; // Cambia a la p√°gina real del test
    });
  </script>
</body>
</html>
